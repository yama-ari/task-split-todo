<% content_for :title, "Split task" %>
<turbo-frame id="<%= dom_id(@parent_task) %>">
  <div class="md:w-2/3 w-full">
    <p class="my-4 text-lg font-semibold"><%= @parent_task.title %></p>
    <p class="my-4 text-lg font-semibold"><%= @parent_task.memo %></p>

    <%= form_with url: split_with_ai_task_path(@parent_task), method: :post, scope: :tasks do |form| %>
      <% @child_tasks.each_with_index do |task, i| %>
        <div class="mb-6 p-4 border rounded-md bg-white shadow-sm">
        <%= form.fields_for i.to_s, task do |task_form| %>
          <%= render partial: "fields", locals: { form: task_form } %>
        <% end %>
        </div>
      <% end %>

      <div class="flex gap-4 my-5">
        <%= form.button t("views.tasks.complete_with_ai"), name: "commit", value: "ai", type: "submit", class: "rounded-md px-3.5 py-2.5 bg-green-600 hover:bg-green-500 text-white font-medium" %>
        <%= form.button t("views.tasks.register_split_tasks"), name: "commit", value: "register", data: { turbo: false }, type: "submit", class: "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-medium" %>
      </div>
    <% end %>

    <%= link_to "キャンセル", tasks_path,
        data: { turbo_frame: "_top" },
        class: "btn btn-outline" %>
  </div>
</turbo-frame>
